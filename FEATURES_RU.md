# Функциональность Telegram AI Agent v2

## Основные возможности

### 1. AI-чат с OpenAI
Бот интегрирован с API OpenAI и может отвечать на сообщения пользователей с помощью современных языковых моделей GPT. Это позволяет получать развернутые, контекстуально-релевантные ответы на различные запросы.

### 2. Предложение промптов (/suggest_prompt)
Уникальная функция, которая анализирует историю взаимодействий и предлагает улучшенные формулировки запросов для получения более качественных ответов от ИИ.

### 3. Ведение журнала взаимодействий
Все сообщения пользователей и ответы бота сохраняются в базе данных PostgreSQL, что позволяет:
- Анализировать популярные запросы
- Улучшать качество ответов
- Использовать данные для предложения промптов
- Вести статистику использования

### 4. Настраиваемая конфигурация
Все параметры бота можно настроить через переменные окружения, включая:
- Токены доступа (Telegram, OpenAI)
- Параметры модели (температура, таймаут)
- Настройки базы данных
- Ограничения на длину ответов

## Команды бота

### /start
Команда для начала работы с ботом. Отправляет приветственное сообщение пользователю.

### /suggest_prompt
Анализирует последние 10 сообщений из журнала взаимодействий и генерирует улучшенный промпт с помощью ИИ OpenAI. Это особенно полезно для:
- Формулирования более точных запросов
- Получения более релевантных ответов
- Изучения лучших практик взаимодействия с ИИ

## Технические особенности

### Асинхронная архитектура
Бот построен на асинхронном фреймворке aiogram 3.*, что обеспечивает:
- Высокую производительность
- Обработку множества одновременных запросов
- Эффективное использование ресурсов сервера

### Безопасность
- Все секретные данные (токены, ключи) хранятся в переменных окружения
- Отсутствие хранения конфиденциальной информации в коде
- Использование современных библиотек для работы с API

### Масштабируемость
- Модульная архитектура упрощает добавление новых функций
- Поддержка различных моделей OpenAI
- Гибкая система конфигурации

## Интеграции

### Telegram API
Через библиотеку aiogram реализована полноценная интеграция с Telegram, включая:
- Обработку текстовых сообщений
- Поддержку команд
- Форматирование ответов

### OpenAI API
Интеграция с OpenAI позволяет:
- Использовать различные модели GPT
- Настраивать параметры генерации (температура, максимальное количество токенов)
- Получать структурированные ответы

### PostgreSQL
Для хранения данных используется асинхронный драйвер asyncpg, обеспечивающий:
- Высокую скорость работы с базой данных
- Поддержку асинхронных операций
- Надежное хранение журналов взаимодействий

## Настройка и кастомизация

### Параметры модели OpenAI
- Выбор конкретной модели (gpt-3.5-turbo, gpt-4 и др.)
- Настройка температуры (степени креативности ответов)
- Установка таймаутов для запросов

### Ограничения Telegram
- Настройка максимальной длины ответов
- Обработка длинных сообщений

### База данных
- Гибкая схема хранения журналов
- Возможность расширения для хранения дополнительной информации

## Преимущества

1. **Интеллектуальные ответы** - Использование современных языковых моделей OpenAI
2. **Адаптивность** - Функция предложения промптов помогает улучшать качество взаимодействия
3. **Прозрачность** - Ведение журналов позволяет отслеживать все взаимодействия
4. **Гибкость** - Легко настраивается под различные нужды
5. **Безопасность** - Современные подходы к хранению секретных данных
6. **Масштабируемость** - Архитектура позволяет легко добавлять новые функции